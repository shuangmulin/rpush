webpackJsonp([7],{"/q5m":function(e,t){},fQyh:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("BO1k"),i=a.n(n),s=a("Xxa5"),r=a.n(s),o=a("exGp"),l=a.n(o),c=a("S+hO"),u={name:"configManagement",components:{configDialog:function(){return a.e(18).then(a.bind(null,"Xg6a"))},nfTypeFilterInput:function(){return a.e(10).then(a.bind(null,"I1DD"))}},data:function(){return{keyword:"",menuListActive:{},page:{pageNum:1,pageSize:25,total:0},searchTypeList:[{label:"配置名称",id:0}],searchTypeValue:{keyword:"",selectedValue:"",option:null},pageParam:{configName:null},columnList:[],tableData:[],configVisible:!1,menuList:[],configId:0,isConfigDailog:!1,deleteName:"",deleteDialogVisible:!1,taskGroupIds:"",isGroup:!0}},mounted:function(){var e=this;return l()(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.platformList();case 1:case"end":return t.stop()}},t,e)}))()},methods:{doSearch:function(){this.queryConfig()},typeSearchChange:function(e){this.searchTypeValue=e,this.pageParam.configName=this.searchTypeValue.keyword},routeTo:function(e){if(e){var t=!0,a=!1,n=void 0;try{for(var s,r=i()(this.menuList);!(t=(s=r.next()).done);t=!0){var o=s.value;if(o.id===e)return this.menuListActive=o,void this.queryConfig()}}catch(e){a=!0,n=e}finally{try{!t&&r.return&&r.return()}finally{if(a)throw n}}}this.menuListActive=this.menuList[0],this.queryConfig()},renderHeader:function(e,t){var a=t.column;return e("el-tooltip",{class:"item",attrs:{effect:"dark",content:a.label,placement:"top"}},[e("span",[a.label])])},handleSizeChange:function(e){this.page.pageSize=e,this.page.pageNum=1,this.queryConfig()},handleCurrentChange:function(e){this.page.pageNum=e,this.queryConfig()},handleDelete:function(e){var t=this;this.$confirm("确定要删除配置【"+e.configName+"】吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(c.c)(e.configId),t.queryConfig()}).catch(function(){})},handleSave:function(){this.queryConfig()},setDefault:function(e){var t=this;return l()(r.a.mark(function a(){return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(c.E)(e.configId,e.defaultFlag);case 2:t.queryConfig();case 3:case"end":return a.stop()}},a,t)}))()},handleConfigInfo:function(e){this.configId=e.configId,this.configVisible=!0,this.isConfigDailog=!0},handleMenuDelete:function(e){this.deleteDialogVisible=!0,this.taskGroupIds=e.id,this.deleteName=e.name,this.isGroup=!0},platformList:function(){var e=this;return l()(r.a.mark(function t(){var a;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(c.u)({keyword:e.keyword,pageNo:1,pageSize:999});case 2:0===(a=t.sent).code&&(e.menuList=a.data,e.routeTo(e.menuListActive.id||e.$route.query.platform));case 4:case"end":return t.stop()}},t,e)}))()},queryConfig:function(){var e=this;return l()(r.a.mark(function t(){var a;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(c.v)(e.menuListActive.id,{configName:e.pageParam.configName,pageNum:e.pageNum,pageSize:e.pageSize});case 2:a=t.sent,e.page.total=a.data.pagination.total,e.tableData=a.data.pagination.dataList,e.columnList=a.data.header;case 6:case"end":return t.stop()}},t,e)}))()}},watch:{configVisible:function(e){e||(this.isConfigDailog=!1,this.configId="")}}},d={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"taskManagement"},[e._m(0),e._v(" "),a("div",{staticClass:"taskManagement_container"},[a("div",{staticClass:"tm_c_wrap"},[a("div",{staticClass:"tm_c_menu"},[a("div",{staticClass:"tm_c_menu_option"},[e._m(1),e._v(" "),a("div",{staticClass:"tm_c_menu_search"},[a("el-input",{attrs:{size:"mini",placeholder:"请输入平台名称",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.platformList(t)}},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}},[a("el-button",{attrs:{slot:"append",size:"mini",icon:"el-icon-search"},on:{click:e.platformList},slot:"append"})],1)],1)]),e._v(" "),a("div",{staticClass:"tm_c_menu_list"},e._l(e.menuList,function(t,n){return a("div",{key:n,staticClass:"item",class:e.menuListActive.id===t.id?"itemActive":"",on:{click:function(a){return e.routeTo(t.id)}}},[a("div",[e._v(e._s(t.name))])])}),0)]),e._v(" "),a("div",{staticClass:"tm_c_table"},[a("div",{staticClass:"setOfLayer"},[a("div",{staticClass:"features"},[a("span",{staticClass:"title"},[e._v(e._s(e.menuListActive.name))]),e._v(" "),a("div",{staticClass:"features_right"},[a("nfTypeFilterInput",{staticClass:"mgl6",attrs:{options:e.searchTypeList,value:this.searchTypeValue},on:{change:e.typeSearchChange,search:e.doSearch}}),e._v(" "),a("div",{staticClass:"el-icon-circle-plus-outline addTask",on:{click:e.handleConfigInfo}},[e._v("添加配置")])],1)]),e._v(" "),a("div",{staticClass:"remarks_box"},[e._v("\n            "+e._s(e.menuListActive.description)+"\n          ")]),e._v(" "),a("div",{staticClass:"table_layout fixedLayer"},[a("div",{staticClass:"setOfLayer"},[a("div",{staticClass:"table_layout_content fixedLayer"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,size:"mini",height:"100%"}},[a("el-table-column",{attrs:{type:"index",align:"center",label:"序号",index:function(t){return t+(e.page.pageNum-1)*e.page.pageSize+1},width:"60"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"配置名称","show-overflow-tooltip":"",prop:"configName","rander-header":e.renderHeader,width:"100"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"配置ID","show-overflow-tooltip":"",prop:"configId","rander-header":e.renderHeader,width:"60"}}),e._v(" "),e._l(e.columnList,function(e,t){return a("el-table-column",{key:t,attrs:{align:"center","show-overflow-tooltip":"",fixed:e.fixed,prop:e.key,label:e.name}})}),e._v(" "),a("el-table-column",{attrs:{width:"70",label:"默认"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{size:"mini"},on:{change:function(a){return e.setDefault(t.row)}},model:{value:t.row.defaultFlag,callback:function(a){e.$set(t.row,"defaultFlag",a)},expression:"scope.row.defaultFlag"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"120",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"optionIng"},[a("span",{staticClass:"operating",on:{click:function(a){return e.handleConfigInfo(t.row)}}},[e._v("编辑")]),e._v(" "),a("span",{staticClass:"danger operating",on:{click:function(a){return e.handleDelete(t.row)}}},[e._v("删除")])])]}}])})],2)],1),e._v(" "),a("div",{staticClass:"table_page"},[a("el-pagination",{attrs:{"current-page":e.page.pageNum,"page-sizes":[25,50,100,150],"page-size":e.page.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.page.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)])])])])])]),e._v(" "),e.isConfigDailog?a("config-dialog",{attrs:{dialogVisible:e.configVisible,platform:e.menuListActive.id,configId:e.configId},on:{"update:dialogVisible":function(t){e.configVisible=t},"update:dialog-visible":function(t){e.configVisible=t},handleSave:e.handleSave}}):e._e()],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"taskManagement_header"},[t("div",{staticClass:"title"},[this._v("消息配置管理")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"tm_c_menu_top"},[t("div",{staticClass:"tm_c_menu_top_title"},[this._v("平台")])])}]};var f=a("VU/8")(u,d,!1,function(e){a("/q5m")},"data-v-0fa7cde7",null);t.default=f.exports}});
//# sourceMappingURL=7.d391505f5950a162fd71.js.map